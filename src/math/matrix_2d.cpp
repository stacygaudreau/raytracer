#include "raytracer/math/matrix_2d.hpp"

namespace rt
{
////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
Matrix2D<T>::Matrix2D(size_t width, size_t height)
: width(width), height(height)
{
    setAllElementsTo(T{});
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
size_t Matrix2D<T>::getWidth() const
{
    return width;
}


////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
T Matrix2D<T>::get(size_t x, size_t y) const
{
    return matrix[x][y];
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
void Matrix2D<T>::set(size_t x, size_t y, T value)
{
    matrix[x][y] = value;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
size_t Matrix2D<T>::getHeight() const
{
    return height;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
bool Matrix2D<T>::isBlank()
{
    for (const auto& row: matrix)
        for (const auto& col: row)
            if (col != T{}) return false;
    return true;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
const std::vector<std::vector<T>>& Matrix2D<T>::getMatrix() const
{
    return matrix;
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
std::vector<T> Matrix2D<T>::getCol(size_t x) const
{
    return matrix[x];
}

////////////////////////////////////////////////////////////////////////////////////////////////////
template <typename T>
void Matrix2D<T>::setAllElementsTo(T value)
{
    matrix.clear();
    matrix.resize(width, std::vector<T>(height, value));
}


////////////////////////////////////////////////////////////////////////////////////////////////////
/// Explicit template instantiations
////////////////////////////////////////////////////////////////////////////////////////////////////
template class Matrix2D<Colour>;
}